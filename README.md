# AuthDemo
本项目旨在基于微服务架构，实现一个简化版用户权限管理系统。系统将涵盖角色分级管理、操作日志异步记录、微服务间协作、分库分表以及分布式事务等核心功能，旨在为后端学习者提供一个实践平台。

## 项目亮点

  * **微服务架构实践**：系统划分为用户服务（User Service）和权限服务（Permission Service），分别负责用户管理和权限分配，体现微服务解耦与独立部署的优势。
  * **角色分级管理**：支持普通用户、管理员、超级管理员三级角色，并通过权限服务进行集中管理，提供灵活的角色分配与权限控制。系统初始化时将自动创建超级管理员。
  * **操作日志异步记录**：采用消息队列（MQ）机制，实现关键操作日志的异步持久化，提高系统响应速度，并确保日志的可靠性。
  * **RPC通信**：用户服务与权限服务之间通过远程过程调用（RPC）进行高效通信，实现跨服务的业务协作。
  * **分库分表实践**：用户表（User Table）采用水平分片策略，有效应对大数据量下的性能瓶颈，提升查询效率。
  * **分布式事务**：用户注册与角色绑定操作通过分布式事务保障原子性，确保数据一致性。

## 核心功能

1.  **用户管理**：
      * 用户注册、登录、信息查询、修改、删除。
      * 用户密码加密存储。
      * 支持根据用户ID、用户名等条件查询用户。
2.  **角色管理**：
      * 角色创建、查询、修改、删除。
      * 角色与权限的绑定与解绑。
      * 预设普通用户、管理员、超级管理员三级角色。
3.  **权限管理**：
      * 权限创建、查询、修改、删除。
      * 支持细粒度的权限控制，如：查看用户列表、修改用户资料、管理角色等。
4.  **操作日志**：
      * 记录用户关键操作，如：用户注册、修改密码、角色分配等。
      * 通过MQ异步发送日志消息，由独立的日志服务进行持久化。
      * 支持日志查询与分析。
5.  **系统初始化**：
      * 系统启动时自动初始化超级管理员账号及默认角色权限。

## 技术栈

  * **后端语言**：Java 
  * **微服务框架**：Spring Cloud 
  * **RPC框架**： gRPC
  * **消息队列**： RabbitMQ
  * **数据库**：MySQL 
  * **分库分表中间件**：ShardingSphere
  * **分布式事务框架**：Seata 
  * **注册中心**： Nacos 
  * **配置中心**：Nacos 
  * **API文档**：Swagger

## 项目结构

```
├── user-service          # 用户服务
│   ├── src
│   └── pom.xml
├── permission-service    # 权限服务
│   ├── src
│   └── pom.xml
├── logging-service           # 日志服务（可选，也可集成到其他服务）
│   ├── src
│   └── pom.xml
├── common                # 公共模块（DTO、RPC接口定义等）
│   ├── src
│   └── pom.xml
├── config                # 配置文件
│   ├── application.yml
│   └── ...
├── doc                   # 文档
│   ├── api-docs.md
│   └── architecture.md
├── sql                   # 数据库脚本
│   ├── schema.sql
│   └── data.sql
└── README.md
```

## 快速启动

1.  **环境准备**：
      * 安装Java、Maven、MySQL、RabbitMQ、ZooKeeper等。
2.  **数据库配置**：
      * 创建数据库，并执行`sql/schema.sql`和`sql/data.sql`初始化表结构和数据。
      * 根据实际情况配置分库分表规则。
3.  **服务配置**：
      * 修改各个服务的配置文件（`application.yml`等），配置数据库连接、MQ地址、注册中心地址等。
4.  **启动服务**：
      * 依次启动注册中心、配置中心（如果使用）、权限服务、用户服务、日志服务。
      * 确保所有服务注册成功并可相互通信。
5.  **API测试**：
      * 使用Swagger或Postman等工具测试API接口。

## 贡献

欢迎对本项目进行贡献！如果您有任何建议、bug报告或功能改进，请提交Issue或Pull Request。

